(this["webpackJsonpsecret-family-recipes"]=this["webpackJsonpsecret-family-recipes"]||[]).push([[0],{131:function(e,a,t){e.exports=t(161)},136:function(e,a,t){},137:function(e,a,t){},160:function(e,a,t){},161:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(8),c=t.n(l),o=(t(136),t(11)),i=t(76),s=t(72),m=t(80),u=t(39),p=t(195),d=t(193),b=t(194),h=t(56),g=(t(137),t(191)),v=t(192),f=t(197),E=t(188);var O=function(e){return r.a.createElement(E.a,Object.assign({component:"a",onClick:function(e){e.preventDefault()}},e))},j=t(92),w=t(196);var y=function(e){var a=e.children,t=e.value,n=e.index,l=Object(j.a)(e,["children","value","index"]);return r.a.createElement("div",Object.assign({role:"tabpanel",hidden:t!==n,id:"nav-tabpanel-".concat(n),"aria-labelledby":"nav-tab-".concat(n)},l),t===n&&r.a.createElement(w.a,null,a))};var k=Object(g.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper}}}));var S=function(e){var a=Object(o.g)(),t=k(),l=0,c=e.tabs.find((function(e){return e.link===a.location.pathname}));c&&(l=c.tabOrder);var i=Object(n.useState)(l),s=Object(m.a)(i,2),u=s[0],p=s[1];return r.a.createElement("div",{className:t.root},r.a.createElement(v.a,{position:"static"},r.a.createElement(f.a,{variant:"fullWidth",value:u,onChange:function(e,t){a.push(e.target.innerText.toLowerCase()),p(t)},"aria-label":"".concat(e.name," tabs")},e.tabs.map((function(e,a){return r.a.createElement(O,Object.assign({key:a,label:e.label,href:e.link},function(e){return{id:"nav-tab-".concat(e),"aria-controls":"nav-tabpanel-".concat(e)}}(a)))})))),e.tabs.map((function(e,a){return r.a.createElement(y,{key:a,value:u,index:e.tabOrder},e.panel)})))},x=t(101),C=t(121),I=t.n(C),N=function(){var e=localStorage.getItem("token");return I.a.create({baseURL:"https://webunit4-secret-family-recipes.herokuapp.com/api/",headers:{Authorization:e}})};var L=Object(o.h)((function(e){var a={email:h.c().email("Must be a Valid email address.").required("You must include an email address."),password:h.c().required("Please enter your password.")},t=h.a().shape(a),l=h.a().shape(Object(u.a)(Object(u.a)({},a),{},{name:h.c().required("You must include your name.")})),c=Object(o.g)().location.pathname.split("/")[1],i=t;"register"===c&&(i=l);var g=Object(n.useState)({email:"",name:"",password:""}),v=Object(m.a)(g,2),f=v[0],E=v[1],O=Object(n.useState)({name:"",email:"",password:""}),j=Object(m.a)(O,2),w=j[0],y=j[1],k=function(e){e.persist(),function(e){var a=e.target.value;h.b(i,e.target.name).validate(a).then((function(a){E(Object(u.a)(Object(u.a)({},f),{},Object(s.a)({},e.target.name,"")))})).catch((function(a){E(Object(u.a)(Object(u.a)({},f),{},Object(s.a)({},e.target.name,a.errors[0])))}))}(e),y(Object(u.a)(Object(u.a)({},w),{},Object(s.a)({},e.target.name,e.target.value)))},C=function(a){a.preventDefault(),N().post("auth/login",w).then((function(a){localStorage.setItem("token",a.data.token),e.history.push("/recipes-home")})).catch((function(e){console.log("Err is: ",e)}))},I=function(a){a.preventDefault(),N().post("auth/register",w).then((function(a){localStorage.setItem("token",a.data.token),e.history.push("/recipes-home")})).catch((function(e){console.log("Err is: ",e)}))},L=r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{id:"email",label:"email",type:"email",name:"email",variant:"outlined","data-cy":"email-input",value:w.email,onChange:k}),f.email.length>0?r.a.createElement(d.a,null,f.email):null,r.a.createElement(p.a,{id:"password",label:"password",type:"password",name:"password",variant:"outlined","data-cy":"password-input",value:w.password,onChange:k}),f.password.length>0?r.a.createElement(d.a,null,f.password):null),R=r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{id:"name",label:"name",type:"text",name:"name",variant:"outlined","data-cy":"name-input",value:w.name,onChange:k}),f.name.length>0?r.a.createElement(d.a,null,f.name):null,L),q=function(e,a){return r.a.createElement(b.a,{type:"submit",variant:"contained",color:"primary","data-cy":a},e)},D=r.a.createElement(x.a,{initialValues:w,onSubmit:C,validationSchema:t},r.a.createElement("form",{onSubmit:C},r.a.createElement("div",{className:"authInput"},L,q("Log in","login")))),V=r.a.createElement(x.a,{initialValues:w,onSubmit:I,validationSchema:l},r.a.createElement("form",{onSubmit:I},r.a.createElement("div",{className:"authInput"},R,q("Register","register"))));return r.a.createElement("section",{className:"loginContainer"},r.a.createElement(S,{tabs:[{label:"Login",link:"/login",panel:D,tabOrder:0},{label:"Register",link:"/register",panel:V,tabOrder:1}]}))})),R=(t(160),function(e){var a=e.component,t=Object(j.a)(e,["component"]);return r.a.createElement(o.b,Object.assign({},t,{render:function(e){return localStorage.getItem("token")?r.a.createElement(a,e):r.a.createElement(o.a,{to:"/login"})}}))});var q=function(){return r.a.createElement("div",null,"Remove this when writing this page!")};var D=function(){var e=Object(o.g)();return console.log({location:e.location}),r.a.createElement(i.a,null,r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"nav-container"}),r.a.createElement("div",{className:"routes"},r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"/login",component:L}),r.a.createElement(o.b,{path:"/register",component:L}),r.a.createElement(o.b,{exact:!0,path:"/",component:L}),r.a.createElement(R,{path:"/recipes-home",component:q})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[131,1,2]]]);
//# sourceMappingURL=main.928fcf79.chunk.js.map